---
title: "spring 환경설정"
date: 2019-7-10 08:26:28 -0400
categories: spring  
tags: [spring]
toc: true
sidebar:
  nav: "docs"
---

## tomcat 설정
C:\dev\apache-tomcat-9.0.50\wtpwebapps\prjt  
C:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\prjt
![톰캣설정](./img/spring04.png)

## jdbc로그 설정  
1. pom.xml  
````javascript
		<dependency>
		    <groupId>com.oracle.database.jdbc</groupId>
		    <artifactId>ojdbc10</artifactId>
		    <version>19.3.0.0</version>
		</dependency>		
```` 
![pmd설정](./img/spring05.png)  
log4jdbc 의존성 추가  
````javascript
		<!-- log4jdbc -->
		<dependency>
			<groupId>org.bgee.log4jdbc-log4j2</groupId>
			<artifactId>log4jdbc-log4j2-jdbc4.1</artifactId>
			<version>1.16</version>
		</dependency>
````	
log4j 버전을 1.2.15 에서 1.2.17.로 변경  
@Log4j는 log 객체를 생성하여 로그를 출력할 수 있게 하는 어노테이션을 사용하려면 runtime scope는 삭제함   
````javascript  
		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<version>1.2.17</version>
````

<del>~~&lt;scope&gt;runtime&lt;/scope&gt;~~</del>  

2. global.properties  
````
jdbc.driver = net.sf.log4jdbc.sql.jdbcapi.DriverSpy
jdbc.url = jdbc:log4jdbc:oracle:thin:@localhost:1521:xe
jdbc.username = hr
jdbc.password = hr
````
3. log4j.xml 파일 설정  
   a. log4j.dtd 경로 변경 
````xml
     <!DOCTYPE log4j:configuration PUBLIC "-//APACHE//DTD LOG4J 1.2//EN" "log4j.dtd">
````	 
     "log4j.dtd"  =>  http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd  

   b. logger 추가  
````javascript
	<logger name="jdbc.resultset">
		<level value="warn" />
	</logger>

	<logger name="jdbc.audit">
		<level value="warn" />
	</logger>

	<logger name="jdbc.connection">
		<level value="warn" />
	</logger>
````  
4. src/main/resources/log4jdbc.log4j2.properties 파일 생성  
````
log4jdbc.spylogdelegator.name= net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator
````

